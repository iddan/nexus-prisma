(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{768:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return c}});var t=n(6265),r=n(8347),m=(n(7294),n(3905)),i=n(7829),s=n.n(i),l=n(3805),o=n(5893),p={repository:"https://github.com/shuding/nextra",docsRepository:"https://github.com/shuding/nextra",branch:"master",path:"/",titleSuffix:" \u2013 Nextra",nextLinks:!0,prevLinks:!0,search:!0,customSearch:null,darkMode:!0,footer:!0,footerText:"MIT ".concat((new Date).getFullYear()," \xa9 Shu Ding."),footerEditOnGitHubLink:!0,logo:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{children:"..."}),(0,o.jsx)("span",{children:"Next.js Static Site Generator"})]}),head:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,o.jsx)("meta",{name:"description",content:"Nextra: the next docs builder"}),(0,o.jsx)("meta",{name:"og:title",content:"Nextra: the next docs builder"})]})};function d(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}var u=function(e){return(0,l.withSSG)(s()({filename:"index.md",route:"/",meta:{},pageMap:[{name:"_app",route:"/_app"},{name:"index",route:"/"}]},p))(e)};function x(e){var a=e.components,n=(0,r.Z)(e,["components"]);return(0,m.mdx)(u,function(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?d(Object(n),!0).forEach((function(a){(0,t.Z)(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}({components:a},n),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"\u26a0\ufe0f Currently in early preview - ",(0,m.mdx)("em",{parentName:"strong"},"not to be used in Production unless you're willing to live on the bleeding edge and give us feedback, which we would welcome!"),".")," Follow progress ",(0,m.mdx)("a",{href:"https://github.com/graphql-nexus/nexus-plugin-prisma/issues/1039",parentName:"p"},"here"),"."),(0,m.mdx)("h1",null,"nexus-prisma"),(0,m.mdx)("p",null,(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/actions/workflows/trunk.yml",parentName:"p"},(0,m.mdx)("img",{src:"https://github.com/prisma/nexus-prisma/actions/workflows/trunk.yml/badge.svg",alt:"trunk",parentName:"a"}))),(0,m.mdx)("p",null,"Official Prisma plugin for Nexus."),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#usage",parentName:"li"},"Usage")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#roadmap",parentName:"li"},"Roadmap")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#architecture",parentName:"li"},"Architecture")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#features",parentName:"li"},"Features"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#type-safe-generated-library-code",parentName:"li"},"Type-safe Generated Library Code")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#project-enums",parentName:"li"},"Project Enums")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#project-scalars",parentName:"li"},"Project Scalars")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#project-relations",parentName:"li"},"Project Relations"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#example-exposing-prisma-client-on-graphql-context-with-apollo-server",parentName:"li"},"Example: Exposing Prisma Client on GraphQL Context with Apollo Server")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#project-11-relation",parentName:"li"},"Project 1:1 Relation"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#example-tests",parentName:"li"},"Example: Tests")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#example-full-11",parentName:"li"},"Example: Full 1:1")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#limitation-nullable-on-without-relation-scalar-side",parentName:"li"},"Limitation: Nullable on Without-Relation-Scalar Side")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#project-1n-relation",parentName:"li"},"Project 1:n Relation"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#example-tests-1",parentName:"li"},"Example: Tests")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#example-full-1n",parentName:"li"},"Example: Full 1:n")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#runtime-settings",parentName:"li"},"Runtime Settings"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#reference",parentName:"li"},"Reference")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#generator-settings",parentName:"li"},"Generator Settings"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#usage-1",parentName:"li"},"Usage")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#reference-1",parentName:"li"},"Reference")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#prisma-string-id-fields-project-as-graphql-id-fields",parentName:"li"},"Prisma String @id fields project as GraphQL ID fields")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#prisma-schema-docs-propagation",parentName:"li"},"Prisma Schema Docs Propagation"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#as-graphql-schema-doc",parentName:"li"},"As GraphQL schema doc")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#as-jsdoc",parentName:"li"},"As JSDoc")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#refined-dx",parentName:"li"},"Refined DX")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#recipes",parentName:"li"},"Recipes"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#project-relation-with-custom-resolver-logic",parentName:"li"},"Project relation with custom resolver logic")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#supply-custom-custom-scalars-to-your-graphql-schema",parentName:"li"},"Supply custom custom scalars to your GraphQL schema")))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#notes",parentName:"li"},"Notes"),(0,m.mdx)("ul",{parentName:"li"},(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#for-users-of-nexus-prisma020",parentName:"li"},"For users of ",(0,m.mdx)("inlineCode",{parentName:"a"},"nexus-prisma@=<0.20"))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#for-users-of-prisma217",parentName:"li"},"For users of ",(0,m.mdx)("inlineCode",{parentName:"a"},"prisma@=<2.17"))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#for-users-of-nexus10",parentName:"li"},"For users of ",(0,m.mdx)("inlineCode",{parentName:"a"},"nexus@=<1.0"))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"#supported-versions-of-node--prisma",parentName:"li"},"Supported Versions Of Node & Prisma"))))),(0,m.mdx)("h2",null,"Usage"),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Install dependencies"),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre"},"npm add nexus-prisma nexus graphql @prisma/client\nnpm add --dev prisma\n")),(0,m.mdx)("blockquote",{parentName:"li"},(0,m.mdx)("p",{parentName:"blockquote"},(0,m.mdx)("inlineCode",{parentName:"p"},"nexus")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"graphql")," and ",(0,m.mdx)("inlineCode",{parentName:"p"},"@prisma/client")," are peer dependencies. ",(0,m.mdx)("inlineCode",{parentName:"p"},"prisma")," is for the Prisma CLI which you'll probably want during development.")),(0,m.mdx)("blockquote",{parentName:"li"},(0,m.mdx)("p",{parentName:"blockquote"},"If you use ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus@=<1.0")," then you must use ",(0,m.mdx)("inlineCode",{parentName:"p"},"t.field(<NAME>, <CONFIG>)")," instead of ",(0,m.mdx)("inlineCode",{parentName:"p"},"t.field(<CONFIG>)"),". The Nexus Prisma docs assume the latter form."))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Add a ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma")," generator block to your Prisma Schema."),(0,m.mdx)("blockquote",{parentName:"li"},(0,m.mdx)("p",{parentName:"blockquote"},"If you are using ",(0,m.mdx)("inlineCode",{parentName:"p"},"prisma@=<2.17")," then you must use the Nexus Prisma Prisma generator name of ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus_prisma")," instead of ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma"),". See ",(0,m.mdx)("a",{href:"#notes",parentName:"p"},"notes")," for more detail."))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Run ",(0,m.mdx)("inlineCode",{parentName:"p"},"prisma generate")," in your terminal.")),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Import models from ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma")," and then pass them to your Nexus type definition and field definition configurations. In this way you will be effectively projecting models from your data layer into GraphQL types in your API layer."))),(0,m.mdx)("h5",null,"Example"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},'\ngenerator client {\n  provider = "prisma-client-js"\n}\n\ngenerator nexusPrisma {\n   provider = "nexus-prisma"\n// provider = "nexus_prisma"    <-- For prisma@=<2.17 users\n}\n\n/// This is a user!\nmodel User {\n  /// This is an id!\n  id  String  @id\n}\n')),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre"},"prisma generate\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { User } from 'nexus-prisma'\nimport { makeSchema, objectType } from 'nexus'\n\nexport const schema = makeSchema({\n  types: [\n    objectType({\n      name: User.$name\n      description: User.$description\n      definition(t) {\n        t.field(User.id)\n     // t.field(User.id.name, User.id)    <-- For nexus@=<1.0 users\n      }\n    })\n  ]\n})\n")),(0,m.mdx)("h2",null,"Roadmap"),(0,m.mdx)("h5",null,"Done"),(0,m.mdx)("ul",{className:"contains-task-list"},(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/4",parentName:"li"},"#4"),") Support for Prisma Model field types that map to standard GraphQL scalars"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/8",parentName:"li"},"#8"),") Support for Prisma Model field types of ",(0,m.mdx)("inlineCode",{parentName:"li"},"DateTime")," & ",(0,m.mdx)("inlineCode",{parentName:"li"},"Json")),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/16",parentName:"li"},"#16"),") Support for Prisma enums"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/pull/25",parentName:"li"},"#25"),", ",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/36",parentName:"li"},"#36"),") Basic support for Prisma Model field types relating to other Models 1:1"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/pull/38",parentName:"li"},"#38"),") Basic support for Prisma Model field types relating to other Models 1:n"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/43",parentName:"li"},"#43"),") Support for runtime and gentime settings"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/61",parentName:"li"},"#61"),") JSDoc for settings/$settings"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/68",parentName:"li"},"#68"),") Support for Prisma Model field type ",(0,m.mdx)("inlineCode",{parentName:"li"},"Bytes"))),(0,m.mdx)("h5",null,"Shortterm"),(0,m.mdx)("ul",{className:"contains-task-list"},(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",checked:!0,disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/59",parentName:"li"},"#59"),") Support for Prisma Model field type ",(0,m.mdx)("inlineCode",{parentName:"li"},"BigInt")),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/94",parentName:"li"},"#94"),") Support for Prisma Model field type ",(0,m.mdx)("inlineCode",{parentName:"li"},"Decimal")),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","Improved JSDoc for relation 1:1 & 1:n fields")),(0,m.mdx)("h5",null,"Midterm"),(0,m.mdx)("ul",{className:"contains-task-list"},(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","Support for Prisma Model field types relating to other Models n:n"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","Support for relation field ordering parameters"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","(",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/83",parentName:"li"},"#83"),") Support for relation field filtering parameters"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","Support for relation field pagination parameters")),(0,m.mdx)("h5",null,"Longterm"),(0,m.mdx)("ul",{className:"contains-task-list"},(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","Nexus Plugin? ",(0,m.mdx)("inlineCode",{parentName:"li"},"t.model"),"? ",(0,m.mdx)("inlineCode",{parentName:"li"},"t.crud"),"?"),(0,m.mdx)("li",{className:"task-list-item",parentName:"ul"},(0,m.mdx)("input",{type:"checkbox",disabled:!0,parentName:"li"})," ","...")),(0,m.mdx)("h2",null,"Architecture"),(0,m.mdx)("p",null,(0,m.mdx)("img",{src:"https://user-images.githubusercontent.com/284476/118728589-70fce780-b802-11eb-8c8b-4328ef5d6fb5.png",alt:"nexus-prisma-architecture",parentName:"p"})),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},"You or a script (CI, programmatic, etc.) run ",(0,m.mdx)("inlineCode",{parentName:"li"},"$ prisma generate"),"."),(0,m.mdx)("li",{parentName:"ol"},"Prisma generator system reads your Prisma schema file"),(0,m.mdx)("li",{parentName:"ol"},'Prisma generator system runs the Nexus Prisma generator passing it the "DMMF", a structured representation of your Prisma schema.'),(0,m.mdx)("li",{parentName:"ol"},"Nexus Prisma generator reads your Nexus Prisma generator configuration if present."),(0,m.mdx)("li",{parentName:"ol"},"Nexus Prisma generator writes generated source code into its own package space in your node_modules."),(0,m.mdx)("li",{parentName:"ol"},"Later when you run your code it imports ",(0,m.mdx)("inlineCode",{parentName:"li"},"nexus-prisma")," which hits the generated entrypoint."),(0,m.mdx)("li",{parentName:"ol"},"The generated runtime is actually thin, making use of a larger static runtime.")),(0,m.mdx)("h2",null,"Features"),(0,m.mdx)("blockquote",null,(0,m.mdx)("p",{parentName:"blockquote"},(0,m.mdx)("strong",{parentName:"p"},"Note"),": \u26d1 The following use abbreviated examples that skip a complete setup of passing Nexus type definition to Nexus' ",(0,m.mdx)("inlineCode",{parentName:"p"},"makeSchema"),". If you are new to Nexus, consider reading the ",(0,m.mdx)("a",{href:"https://nxs.li/tutorial",parentName:"p"},"official Nexus tutorial")," before jumping into Nexus Prisma.")),(0,m.mdx)("h3",null,"Type-safe Generated Library Code"),(0,m.mdx)("p",null,"Following the same philosophy as Prisma Client, Nexus Prisma uses generation to create an API that feels tailor made for your project."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},"model User {\n  id  String  @id\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { User } from 'nexus-prisma'\nimport { objectType } from 'nexus'\n\nobjectType({\n  name: User.$name\n  description: User.$description\n  definition(t) {\n    t.field({\n      type: User.id.type,\n      description: User.id.description\n    })\n  }\n})\n")),(0,m.mdx)("h3",null,"Project Enums"),(0,m.mdx)("p",null,"Every enum defined in your Prisma schema becomes importable as a Nexus enum type definition configuration. This makes it trivial to project enums from your database layer into your API layer."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},"enum SomeEnum {\n  foo\n  bar\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { SomeEnum } from 'nexus-prisma'\nimport { enumType } from 'nexus'\n\nSomeEnum.name //    'SomeEnum'\nSomeEnum.members // ['foo', 'bar']\n\nenumType(SomeEnum)\n")),(0,m.mdx)("h3",null,"Project Scalars"),(0,m.mdx)("p",null,"Like GraphQL, ",(0,m.mdx)("a",{href:"https://www.prisma.io/docs/reference/api-reference/prisma-schema-reference/#model-field-scalar-types",parentName:"p"},"Prisma has the concept of scalar types"),". Some of the Prisma scalars can be naturally mapped to standard GraphQL scalars. The mapping is as follows:"),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Prisma Standard Scalar to GraphQL Standard Scalar Mapping")),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr"},"Prisma"),(0,m.mdx)("th",{parentName:"tr"},"GraphQL"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Boolean")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Boolean"))),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"String")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"String"))),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Int")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Int"))),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Float")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Float"))),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"String")," with ",(0,m.mdx)("inlineCode",{parentName:"td"},"@id")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"ID"))),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Int")," with ",(0,m.mdx)("inlineCode",{parentName:"td"},"@id")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"ID")," | ",(0,m.mdx)("inlineCode",{parentName:"td"},"Int")," (",(0,m.mdx)("a",{href:"#projectidinttographql-id--int",parentName:"td"},"configurable"),")")))),(0,m.mdx)("p",null,"However some of the Prisma scalars do not have a natural standard representation in GraphQL. For these cases Nexus Prisma generates code that references type names matching those scalar names in Prisma. Then, you are expected to define those custom scalar types in your GraphQL API. Nexus Prisma ships with pre-defined mappings in ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma/scalars")," you ",(0,m.mdx)("em",{parentName:"p"},"can")," use for convenience. The mapping is as follows:"),(0,m.mdx)("p",null,(0,m.mdx)("strong",{parentName:"p"},"Prisma Standard-Scalar to GraphQL Custom-Scalar Mapping")),(0,m.mdx)("table",null,(0,m.mdx)("thead",{parentName:"table"},(0,m.mdx)("tr",{parentName:"thead"},(0,m.mdx)("th",{parentName:"tr"},"Prisma"),(0,m.mdx)("th",{parentName:"tr"},"GraphQL"),(0,m.mdx)("th",{parentName:"tr"},"Nexus ",(0,m.mdx)("inlineCode",{parentName:"th"},"t")," Helper"),(0,m.mdx)("th",{parentName:"tr"},"GraphQL Scalar Implementation"),(0,m.mdx)("th",{parentName:"tr"},"Additional Info"))),(0,m.mdx)("tbody",{parentName:"table"},(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Json")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Json")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"json")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("a",{href:"https://www.graphql-scalars.dev/docs/scalars/jsonobject",parentName:"td"},"JsonObject")),(0,m.mdx)("td",{parentName:"tr"})),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"DateTime")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"DateTime")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"dateTime")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("a",{href:"https://www.graphql-scalars.dev/docs/scalars/datetime",parentName:"td"},"DateTime")),(0,m.mdx)("td",{parentName:"tr"})),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"BigInt")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"BigInt")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"bigInt")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("a",{href:"https://www.graphql-scalars.dev/docs/scalars/big-int",parentName:"td"},"BigInt")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt",parentName:"td"},"JavaScript BigInt"))),(0,m.mdx)("tr",{parentName:"tbody"},(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Bytes")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"Bytes")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("inlineCode",{parentName:"td"},"bytes")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("a",{href:"https://www.graphql-scalars.dev/docs/scalars/byte/",parentName:"td"},"Byte")),(0,m.mdx)("td",{parentName:"tr"},(0,m.mdx)("a",{href:"https://nodejs.org/api/buffer.html#buffer_buffer",parentName:"td"},"Node.js Buffer"))))),(0,m.mdx)("blockquote",null,(0,m.mdx)("p",{parentName:"blockquote"},(0,m.mdx)("strong",{parentName:"p"},"Note:")," Not all Prisma scalar mappings are implemented yet: ",(0,m.mdx)("inlineCode",{parentName:"p"},"Decimal"),", ",(0,m.mdx)("inlineCode",{parentName:"p"},"Unsupported"))),(0,m.mdx)("blockquote",null,(0,m.mdx)("p",{parentName:"blockquote"},(0,m.mdx)("strong",{parentName:"p"},"Note:")," BigInt is supported in Node.js since version ",(0,m.mdx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt#browser_compatibility",parentName:"p"},"10.4.0")," however to support BigInt in ",(0,m.mdx)("inlineCode",{parentName:"p"},"JSON.parse"),"/",(0,m.mdx)("inlineCode",{parentName:"p"},"JSON.stringify")," you must use ",(0,m.mdx)("a",{href:"https://github.com/ardatan/json-bigint-patch",parentName:"p"},(0,m.mdx)("inlineCode",{parentName:"a"},"json-bigint-patch"))," otherwise BigInt values will be serialized as strings.")),(0,m.mdx)("p",null,"You can use your own GraphQL Scalar Implementation, however, you ",(0,m.mdx)("em",{parentName:"p"},"must adhear to the above Prisma/GraphQL name mapping defined above"),"."),(0,m.mdx)("p",null,"Here is an example using Nexus Prisma's pre-defined GraphQL custom scalars:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import NexusPrismaScalars from 'nexus-prisma/scalars'\nimport { makeSchema } from 'nexus'\n\nmakeSchema({\n  types: [NexusPrismaScalars],\n})\n")),(0,m.mdx)("p",null,"There is a ",(0,m.mdx)("a",{href:"#Supply-custom-custom-scalars-to-your-GraphQL-schema",parentName:"p"},"recipe below")," showing how to add your own custom scalars if you want."),(0,m.mdx)("h3",null,"Project Relations"),(0,m.mdx)("p",null,"You can project ",(0,m.mdx)("a",{href:"https://www.prisma.io/docs/concepts/components/prisma-schema/relations",parentName:"p"},"relations")," into your API with Nexus Prisma. Nexus Prisma even includes the resolver you'll need at runtime to fulfill the projection by automating use of your Prisma Client instance."),(0,m.mdx)("p",null,"Please note that not all kinds of relationships are supported yet. Details about projecting each kind of relation are documented in their respective sections. This section only contains general documentation common to all."),(0,m.mdx)("p",null,"To project relations you must by default expose an instance of Prisma Client on the GraphQL context under the key name ",(0,m.mdx)("inlineCode",{parentName:"p"},"prisma"),". You can ",(0,m.mdx)("a",{href:"#prismaclientcontextfield-string",parentName:"p"},"customize which context property Nexus Prisma should look for your Prisma Client"),"."),(0,m.mdx)("h4",null,"Example: Exposing Prisma Client on GraphQL Context with Apollo Server"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { ApolloServer } from 'apollo-server'\nimport { PrismaClient } from '@prisma/client'\nimport schema from './your/schema/somewhere'\n\nconst prisma = new PrismaClient()\n\nnew ApolloServer({\n  schema,\n  context() {\n    return {\n      prisma,\n    }\n  },\n})\n")),(0,m.mdx)("h3",null,"Project 1:1 Relation"),(0,m.mdx)("p",null,"You can project ",(0,m.mdx)("a",{href:"https://www.prisma.io/docs/concepts/components/prisma-schema/relations#one-to-one-relations",parentName:"p"},"1:1 relationships")," into your API."),(0,m.mdx)("h4",null,"Example: Tests"),(0,m.mdx)("p",null,"The integration test suite is a useful reference as it is declarative (easy to read) and gives a known-working example spanning from database all the way to executed GraphQL document."),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/blob/main/tests/integration/relation1To1.test.ts",parentName:"li"},"Tests")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/blob/main/tests/integration/__snapshots__/relation1To1.test.ts.snap",parentName:"li"},"Snapshots"))),(0,m.mdx)("h4",null,"Example: Full 1:1"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},"// Database Schema\n\nmodel User {\n  id         String  @id\n  profile    Profile @relation(fields: [profileId], references: [id])\n  profileId  String\n}\n\nmodel Profile {\n  id      String  @id\n  user    User?\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"// API Schema\n\nimport { User, Profile } from 'nexus-prisma'\n\nqueryType({\n  definition(t) {\n    t.nonNull.list.nonNull.field('users', {\n      type: 'User',\n      resolve(_, __, ctx) {\n        return ctx.prisma.user.findMany()\n      },\n    })\n  },\n})\n\nobjectType({\n  name: User.$name,\n  definition(t) {\n    t.field(User.id)\n    t.field(User.profile)\n  },\n})\n\nobjectType({\n  name: Profile.$name,\n  definition(t) {\n    t.field(Profile.id)\n  },\n})\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-graphql",parentName:"pre"},"# API Schema Represented in GraphQL SDL (this is generated by Nexus)\n\ntype Query {\n  users: [User!]!\n}\n\ntype User {\n  id: ID\n  profile: Profile\n}\n\ntype Profile {\n  id: ID\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"// Example Database Data (for following example)\n\nawait prisma.user.create({\n  data: {\n    id: 'user1',\n    profile: {\n      create: {\n        id: 'profile1',\n      },\n    },\n  },\n})\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-graphql",parentName:"pre"},"# Example API Client Query\n\nquery {\n  users {\n    id\n    profile {\n      id\n    }\n  }\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "data": {\n    "users": [\n      {\n        "id": "user1",\n        "profile": {\n          "id": "profile1"\n        }\n      }\n    ]\n  }\n}\n')),(0,m.mdx)("h4",null,"Limitation: Nullable on Without-Relation-Scalar Side"),(0,m.mdx)("p",null,"Prisma requires that a 1:1 relationship has one side that is optional. For example in the following it is ",(0,m.mdx)("strong",{parentName:"p"},"not")," possible for ",(0,m.mdx)("inlineCode",{parentName:"p"},"Profile")," to have a required relationship to ",(0,m.mdx)("inlineCode",{parentName:"p"},"User"),". For more detail you can read the Prisma docs about this ",(0,m.mdx)("a",{href:"https://www.prisma.io/docs/concepts/components/prisma-schema/relations#one-to-one-relations",parentName:"p"},"here"),"."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},'model User {\n  id         String  @id\n  profile    Profile @relation(fields: [profileId], references: [id])\n  profileId  String\n}\n\nmodel Profile {\n  id      String  @id\n  user    User?  // <--  "?" required\n}\n')),(0,m.mdx)("p",null,"Prisma inherits this limitation from databases. In turn Nexus Prisma inherits this limitation from Prisma. For example consider this projection and then look at the resulting GraphQL SDL representation."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { User, Profile } from 'nexus-prisma'\n\nobjectType({\n  name: User.$name,\n  definition(t) {\n    t.field(User.id)\n    t.field(User.profile)\n  },\n})\n\nobjectType({\n  name: Profile.$name,\n  definition(t) {\n    t.field(Profile.id)\n    t.field(User.profile)\n  },\n})\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-graphql",parentName:"pre"},"type User {\n  id: ID\n  profile: Profile!\n}\n\ntype Profile {\n  id: ID\n  user: User # <-- Nullable!\n}\n")),(0,m.mdx)("p",null,"This limitation may be a problem for your API. There is an ",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/34",parentName:"p"},"issue track this that you can subscribe to")," if interested. As a workaround for now you can do this:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"objectType({\n  name: Profile.$name,\n  definition(t) {\n    t.field(Profile.id)\n    t.field({\n      ...User.profile,\n      type: nonNull(User.profile.type),\n    })\n  },\n})\n")),(0,m.mdx)("h3",null,"Project 1:n Relation"),(0,m.mdx)("p",null,"You can project ",(0,m.mdx)("a",{href:"https://www.prisma.io/docs/concepts/components/prisma-schema/relations#one-to-many-relations",parentName:"p"},"1:n relationships")," into your API."),(0,m.mdx)("h4",null,"Example: Tests"),(0,m.mdx)("p",null,"The integration test suite is a useful reference as it is declarative (easy to read) and gives a known-working example spanning from database all the way to executed GraphQL document."),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/blob/main/tests/integration/relation1ToN.test.ts",parentName:"li"},"Tests")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/blob/main/tests/integration/__snapshots__/relation1ToN.test.ts.snap",parentName:"li"},"Snapshots"))),(0,m.mdx)("h4",null,"Example: Full 1:n"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},"// Database Schema\n\nmodel User {\n  id         String    @id\n  posts      Post[]\n}\n\nmodel Post {\n  id        String  @id\n  author    User?   @relation(fields: [authorId], references: [id])\n  authorId  String\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"// API Schema\n\nimport { User, Post } from 'nexus-prisma'\n\nqueryType({\n  definition(t) {\n    t.nonNull.list.nonNull.field('users', {\n      type: 'User',\n      resolve(_, __, ctx) {\n        return ctx.prisma.user.findMany()\n      },\n    })\n  },\n})\n\nobjectType({\n  name: User.$name,\n  definition(t) {\n    t.field(User.id)\n    t.field(User.posts)\n  },\n})\n\nobjectType({\n  name: Post.$name,\n  definition(t) {\n    t.field(Post.id)\n  },\n})\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-graphql",parentName:"pre"},"# API Schema Represented in GraphQL SDL (this is generated by Nexus)\n\ntype Query {\n  users: [User]\n}\n\ntype User {\n  id: ID!\n  posts: [Post!]!\n}\n\ntype Post {\n  id: ID!\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"// Example Database Data (for following example)\n\nawait prisma.user.create({\n  data: {\n    id: 'user1',\n    posts: {\n      create: [{ id: 'post1' }, { id: 'post2' }],\n    },\n  },\n})\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-graphql",parentName:"pre"},"# Example API Client Query\n\nquery {\n  users {\n    id\n    posts {\n      id\n    }\n  }\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-json",parentName:"pre"},'{\n  "data": {\n    "users": [\n      {\n        "id": "user1",\n        "posts": [\n          {\n            "id": "post1"\n          },\n          {\n            "id": "post2"\n          }\n        ]\n      }\n    ]\n  }\n}\n')),(0,m.mdx)("h3",null,"Runtime Settings"),(0,m.mdx)("h4",null,"Reference"),(0,m.mdx)("h5",null,(0,m.mdx)("inlineCode",{parentName:"h5"},"prismaClientContextField: string")),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@summary")," The name of the GraphQL context field to get an instance of Prisma Client from.")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@remarks")," The instance of Prisma Client found here is accessed in the default resolvers for relational fields.")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@default")," ",(0,m.mdx)("inlineCode",{parentName:"p"},'"prisma"'))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@example")),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"// src/main.ts\n\nimport { PrismaClient } from '@prisma/client'\nimport { ApolloServer } from 'apollo-server'\nimport { makeSchema } from 'nexus'\nimport { User, Post, $settings } from 'nexus-prisma'\n\nnew ApolloServer({\n  schema: makeSchema({\n    types: [],\n  }),\n  context() {\n    return {\n      db: new PrismaClient(), // <-- You put Prisma client on the \"db\" context property\n    }\n  },\n})\n\n$settings({\n  prismaClientContextField: 'db', // <-- Tell Nexus Prisma\n})\n")))),(0,m.mdx)("h5",null,(0,m.mdx)("inlineCode",{parentName:"h5"},"prismaClientImportId: string")),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@summary")," Where Nexus Prisma will try to import your generated Prisma Client from. You should not need to configure this normally because Nexus Prisma generator automatically reads the Prisma Client generator ",(0,m.mdx)("inlineCode",{parentName:"p"},"output")," setting if you have set it. The value here will be used in a dynamic import thus following Node's path resolution rules. You can pass a node_modules package like ",(0,m.mdx)("inlineCode",{parentName:"p"},"foo")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"@prisma/client"),", ",(0,m.mdx)("inlineCode",{parentName:"p"},"@my/custom/thing")," etc. or you can pass an absolute module/file path ",(0,m.mdx)("inlineCode",{parentName:"p"},"/my/custom/thing")," / ",(0,m.mdx)("inlineCode",{parentName:"p"},"/my/custom/thing/index.js")," or finally a relative path to be resolved relative to the location of Nexus Prisma source files (you probably don't want this).")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@default")," ",(0,m.mdx)("inlineCode",{parentName:"p"},"@prisma/client"))),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@remarks")," Nexus Prisma imports Prisma client internally for two reasons: 1) validation wherein a class reference to Prisma Client is needed for some ",(0,m.mdx)("inlineCode",{parentName:"p"},"instanceof")," checks and 2) for acquiring the DMMF as Nexus Prisma relies on some post-processing done by Prisma Client generator.")),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"@example")),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"// src/main.ts\n\nimport { PrismaClient } from '@prisma/client'\nimport { ApolloServer } from 'apollo-server'\nimport { makeSchema } from 'nexus'\nimport { User, Post, $settings } from 'nexus-prisma'\n\nnew ApolloServer({\n  schema: makeSchema({\n    types: [],\n  }),\n})\n\n$settings({\n  prismaClientImportId: '@my/custom/thing',\n})\n")))),(0,m.mdx)("h3",null,"Generator Settings"),(0,m.mdx)("p",null,"You are able to control certain aspects of the Nexus Prisma code generation."),(0,m.mdx)("h4",null,"Usage"),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Create a configuration file named any of:"),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre"},"nexusPrisma.ts  /  nexus-prisma.ts  /  nexus_prisma.ts\n")),(0,m.mdx)("p",{parentName:"li"},"In one of the following directories:"),(0,m.mdx)("ol",{parentName:"li"},(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"Project Root")," \u2013 The directory containing your project's package.json. Example:"),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre"},"  \u251c\u2500\u2500 nexus-prisma.ts\n  \u2514\u2500\u2500 package.json\n"))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"Primsa Directory")," \u2013 The directory containing your Prisma schema. Example:"),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{parentName:"pre"},"  \u251c\u2500\u2500 prisma/nexus-prisma.ts\n  \u2514\u2500\u2500 package.json\n"))))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},"Import the settings singleton and make your desired changes. Example:"),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { settings } from 'nexus-prisma/generator'\n\nsettings({\n  projectIdIntToGraphQL: 'ID',\n})\n")))),(0,m.mdx)("h4",null,"Reference"),(0,m.mdx)("h5",null,(0,m.mdx)("inlineCode",{parentName:"h5"},"projectIdIntToGraphQL: 'ID' | 'Int'")),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("strong",{parentName:"li"},(0,m.mdx)("inlineCode",{parentName:"strong"},"@summary"))," Map Prisma model fields of type ",(0,m.mdx)("inlineCode",{parentName:"li"},"Int")," with attribute ",(0,m.mdx)("inlineCode",{parentName:"li"},"@id")," to ",(0,m.mdx)("inlineCode",{parentName:"li"},"ID")," or ",(0,m.mdx)("inlineCode",{parentName:"li"},"Int"),"."),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("strong",{parentName:"li"},(0,m.mdx)("inlineCode",{parentName:"strong"},"@default"))," ",(0,m.mdx)("inlineCode",{parentName:"li"},"Int"))),(0,m.mdx)("h5",null,(0,m.mdx)("inlineCode",{parentName:"h5"},"docPropagation.JSDoc: boolean")),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("strong",{parentName:"li"},(0,m.mdx)("inlineCode",{parentName:"strong"},"@summary"))," Should Prisma Schema docs propagate as JSDoc?"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("strong",{parentName:"li"},(0,m.mdx)("inlineCode",{parentName:"strong"},"@default"))," ",(0,m.mdx)("inlineCode",{parentName:"li"},"true"))),(0,m.mdx)("h5",null,(0,m.mdx)("inlineCode",{parentName:"h5"},"docPropagation.GraphQLDocs: boolean")),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("strong",{parentName:"li"},(0,m.mdx)("inlineCode",{parentName:"strong"},"@summary"))," Should Prisma Schema docs propagate as GraphQL docs?"),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("strong",{parentName:"li"},(0,m.mdx)("inlineCode",{parentName:"strong"},"@remarks"))," When this is disabled it will force ",(0,m.mdx)("inlineCode",{parentName:"li"},".description")," property to be ",(0,m.mdx)("inlineCode",{parentName:"li"},"undefined"),". This is for convenience, allowing you to avoid post-generation data manipulation or consumption contortions."),(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("strong",{parentName:"li"},(0,m.mdx)("inlineCode",{parentName:"strong"},"@default"))," ",(0,m.mdx)("inlineCode",{parentName:"li"},"true"))),(0,m.mdx)("h3",null,"Prisma String @id fields project as GraphQL ID fields"),(0,m.mdx)("p",null,"All ",(0,m.mdx)("inlineCode",{parentName:"p"},"String")," fields with ",(0,m.mdx)("inlineCode",{parentName:"p"},"@id")," attribute in your Prisma Schema get projected as GraphQL ",(0,m.mdx)("inlineCode",{parentName:"p"},"ID")," types rather than ",(0,m.mdx)("inlineCode",{parentName:"p"},"String")," types."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},"model User {\n  id  String  @id\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { User } from 'nexus-prisma'\nimport { objectType } from 'nexus'\n\nobjectType({\n  name: User.$name\n  description: User.$description\n  definition(t) {\n    t.field(User.id)\n  }\n})\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-graphql",parentName:"pre"},"type User {\n  id: ID\n}\n")),(0,m.mdx)("h3",null,"Prisma Schema Docs Propagation"),(0,m.mdx)("h4",null,"As GraphQL schema doc"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},"/// A user.\nmodel User {\n  /// A stable identifier to find users by.\n  id  String  @id\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { User } from 'nexus-prisma'\nimport { objectType } from 'nexus'\n\nUser.$description // JSDoc: A user.\nUser.id.description // JSDoc: A stable identifier to find users by.\n\nobjectType({\n  name: User.$name\n  description: User.$description\n  definition(t) {\n    t.field(User.id)\n  }\n})\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-graphql",parentName:"pre"},'"""\nA user.\n"""\ntype User {\n  """\n  A stable identifier to find users by.\n  """\n  id: ID\n}\n')),(0,m.mdx)("h4",null,"As JSDoc"),(0,m.mdx)("p",null,"Can be disabled in ",(0,m.mdx)("a",{href:"https://pris.ly/nexus-prisma/docs/settings/gentime",parentName:"p"},"gentime settings"),"."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-prisma",parentName:"pre"},"/// A user.\nmodel User {\n  /// A stable identifier to find users by.\n  id  String  @id\n}\n")),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { User } from 'nexus-prisma'\n\nUser // JSDoc: A user.\nUser.id // JSDoc: A stable identifier to find users by.\n")),(0,m.mdx)("h3",null,"Refined DX"),(0,m.mdx)("p",null,"These are finer points that aren't perhaps worth a top-level point but none the less add up toward a thoughtful developer experience."),(0,m.mdx)("h5",null,"JSDoc"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},"Generated Nexus configuration for fields and models that you ",(0,m.mdx)("em",{parentName:"li"},"have not")," documented in your PSL get default JSDoc that teaches you how to do so."),(0,m.mdx)("li",{parentName:"ul"},"JSDoc for Enums have their members embedded")),(0,m.mdx)("h5",null,"Default Runtime"),(0,m.mdx)("p",null,"When your project is in a state where the generated Nexus Prisma part is missing (new repo clone, reinstalled deps, etc.) Nexus Prisma gives you a default runtime export named ",(0,m.mdx)("inlineCode",{parentName:"p"},"PleaseRunPrismaGenerate")," and will error with a clear message."),(0,m.mdx)("h5",null,"Peer-Dependency Validation"),(0,m.mdx)("p",null,"When ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma")," is imported it will validate that your project has peer dependencies setup correctly."),(0,m.mdx)("p",null,"If a peer dependency is not installed it ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma")," will log an error and then exit 1. If its version does not satify the range supported by the current version of ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma")," that you have installed, then a warning will be logged. If you want to opt-out of this validation then set an envar as follows:"),(0,m.mdx)("pre",null,(0,m.mdx)("code",{parentName:"pre"},"NO_PEER_DEPENDENCY_CHECK=true|1\nPEER_DEPENDENCY_CHECK=false|0\n")),(0,m.mdx)("h5",null,"Auto-Import Optimized"),(0,m.mdx)("ul",null,(0,m.mdx)("li",{parentName:"ul"},(0,m.mdx)("inlineCode",{parentName:"li"},"nexus-prisma/scalars")," offers a default export you can easily auto-import by name: ",(0,m.mdx)("inlineCode",{parentName:"li"},"NexusPrismaScalars"),".")),(0,m.mdx)("h2",null,"Recipes"),(0,m.mdx)("h3",null,"Project relation with custom resolver logic"),(0,m.mdx)("p",null,"Nexus Prisma generates default GraphQL resolvers for your model ",(0,m.mdx)("em",{parentName:"p"},"relation fields"),". However you may want to run custom logic in the resolver. This is easy to do. The following show a few ways."),(0,m.mdx)("ol",null,(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"Wrap Style")," You can access the default resolver within your own custom resolver."),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"objectType({\n  name: User.$name,\n  definition(t) {\n    t.field(User.id)\n    t.field({\n      ...User.posts,\n      async resolve(...args) {\n        // Your custom before-logic here\n        const result = await User.posts.resolve(...args)\n        // Your custom after-logic here\n        return result\n      },\n    })\n  },\n})\n"))),(0,m.mdx)("li",{parentName:"ol"},(0,m.mdx)("p",{parentName:"li"},(0,m.mdx)("strong",{parentName:"p"},"Replace Style")," You can simply opt out of using the default resolver completely:"),(0,m.mdx)("pre",{parentName:"li"},(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"objectType({\n  name: User.$name,\n  definition(t) {\n    t.field(User.id)\n    t.field({\n      ...User.posts,\n      async resolve(...args) {\n        // Your custom logic here\n      },\n    })\n  },\n})\n")))),(0,m.mdx)("h3",null,"Supply custom custom scalars to your GraphQL schema"),(0,m.mdx)("p",null,"The following is a brief example how you could add your own custom GraphQL custom scalars to satisfy Nexus Prisma. Note that most of the time using the defaults exported by ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma/scalars")," will probably be good enough for you."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-ts",parentName:"pre"},"import { GraphQLScalarType } from 'graphql'\nimport { JSONObjectResolver, DateTimeResolver } from 'graphql-scalars'\nimport { asNexusMethod, makeSchema } from 'nexus'\n\nconst jsonScalar = new GraphQLScalarType({\n  ...JSONObjectResolver,\n  // Override the default 'JsonObject' name with one that matches what Nexus Prisma expects.\n  name: 'Json',\n})\n\nconst dateTimeScalar = new GraphQLScalarType(DateTimeResolver)\n\nmakeSchema({\n  types: [asNexusMethod(jsonScalar, 'json'), asNexusMethod(dateTimeScalar, 'dateTime')],\n})\n")),(0,m.mdx)("h2",null,"Notes"),(0,m.mdx)("h3",null,"For users of ",(0,m.mdx)("inlineCode",{parentName:"h3"},"nexus-prisma@=<0.20")),(0,m.mdx)("p",null,"Versions of ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma")," package prior to ",(0,m.mdx)("inlineCode",{parentName:"p"},"0.20")," were a completely different version of the API, and had also become deprecated at one point to migrate to ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-plugin-prisma")," when Nexus Framework was being worked on. All of that is history."),(0,m.mdx)("h3",null,"For users of ",(0,m.mdx)("inlineCode",{parentName:"h3"},"prisma@=<2.17")),(0,m.mdx)("p",null,"If you are using ",(0,m.mdx)("inlineCode",{parentName:"p"},"prisma@=<2.17")," then you must use the Nexus Prisma Prisma generator name of ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus_prisma")," instead of ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma"),". This is because prior to ",(0,m.mdx)("inlineCode",{parentName:"p"},"prisma@2.18")," there was a hardcode check for ",(0,m.mdx)("inlineCode",{parentName:"p"},"nexus-prisma")," that would fail with an error message about a now-old migration."),(0,m.mdx)("h3",null,"For users of ",(0,m.mdx)("inlineCode",{parentName:"h3"},"nexus@=<1.0")),(0,m.mdx)("p",null,"The ",(0,m.mdx)("a",{href:"https://github.com/graphql-nexus/nexus/releases/tag/1.0.0",parentName:"p"},"release of Nexus 1.1")," introduced an overload to ",(0,m.mdx)("inlineCode",{parentName:"p"},"t.field")," allowing improved usage of Nexus Prisma. The difference is as follows. Note if you prefer the older way that is and always will be supported too."),(0,m.mdx)("pre",null,(0,m.mdx)("code",{className:"language-diff",metastring:"ts",ts:!0,parentName:"pre"},"import { User } from 'nexus-prisma'\nimport { makeSchema, objectType } from 'nexus'\n\nexport const schema = makeSchema({\n  types: [\n    objectType({\n      name: User.$name\n      description: User.$description\n      definition(t) {\n+        t.field(User.id) //                 <-- for nexus@>=1.1 users\n-        t.field(User.id.name, User.id) //   <-- For nexus@=<1.0 users\n      }\n    })\n  ]\n})\n")),(0,m.mdx)("h3",null,"Supported Versions Of Node & Prisma"),(0,m.mdx)("p",null,"We only officially support what we test."),(0,m.mdx)("p",null,"We test Node versions that are ",(0,m.mdx)("inlineCode",{parentName:"p"},"Active LTS")," and ",(0,m.mdx)("inlineCode",{parentName:"p"},"Current"),". For which versions of Node that equals you can refer to our tests or look here: ",(0,m.mdx)("a",{href:"https://nodejs.org/en/about/releases",parentName:"p"},"https://nodejs.org/en/about/releases"),"."),(0,m.mdx)("p",null,"We test Prisma versions ",(0,m.mdx)("inlineCode",{parentName:"p"},"2.25"),". More Prisma versions are planned to be tested, refer to ",(0,m.mdx)("a",{href:"https://github.com/prisma/nexus-prisma/issues/69",parentName:"p"},"#69"),"."),(0,m.mdx)("p",null,"We do not currently maintain a historical matrix of what past versions of Prisma supported what vesrions of Prisma and Node."))}x.isMDXComponent=!0;var c=x},6837:function(e,a,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(768)}])}},function(e){e.O(0,[244,774,888,179],(function(){return a=6837,e(e.s=a);var a}));var a=e.O();_N_E=a}]);